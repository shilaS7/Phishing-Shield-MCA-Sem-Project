<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>PhishShield - Detailed Analysis Report</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <link href="../static/assets/img/newlogo.jpg" rel="icon">
  <link href="../static/assets/img/newlogo.jpg" rel="apple-touch-icon">

  <link href="../static/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../static/assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="../static/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="../static/assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="../static/assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="../static/assets/vendor/aos/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link href="../static/style.css" rel="stylesheet">
  
       <style>
                               /* Main content spacing */
         .inner-page {
           padding-top: 20px !important;
         }
       
       .feature-card {
      border-left: 4px solid;
      margin-bottom: 10px;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .feature-safe { border-left-color: #28a745; background-color: #d4edda; }
    .feature-suspicious { border-left-color: #ffc107; background-color: #fff3cd; }
    .feature-risky { border-left-color: #dc3545; background-color: #f8d7da; }
    
    /* Enhanced Security Recommendations Styling */
    .recommendations-card {
      border: none;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
         .recommendations-header {
       background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
       border: none;
       padding: 25px 30px;
       color: white;
     }
    
    .recommendations-icon {
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 20px;
      flex-shrink: 0;
    }
    
    .recommendations-icon i {
      font-size: 28px;
      color: white;
    }
    
    .recommendations-title h4 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 5px;
    }
    
    .recommendations-title p {
      font-size: 14px;
      opacity: 0.9;
      margin: 0;
    }
    
    .recommendations-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      padding: 20px 0;
    }
    
    .recommendation-item {
      position: relative;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 12px;
      padding: 25px;
      border: 1px solid #e9ecef;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }
    
         .recommendation-item:hover {
       transform: translateY(-5px);
       box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
       border-color: #6c757d;
     }
    
    .recommendation-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }
    
    .recommendation-content {
      margin-right: 50px;
    }
    
    .recommendation-content p {
      margin: 0;
      font-size: 15px;
      line-height: 1.6;
      color: #495057;
      font-weight: 500;
    }
    
         .recommendation-number {
       position: absolute;
       top: 15px;
       left: 15px;
       width: 30px;
       height: 30px;
       background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
       border-radius: 50%;
       display: flex;
       align-items: center;
       justify-content: center;
       color: white;
       font-size: 14px;
       font-weight: 700;
     }
    
         /* Responsive adjustments for recommendations */
     @media (max-width: 768px) {
       .recommendations-grid {
         grid-template-columns: 1fr;
         gap: 15px;
       }
       
       .recommendation-item {
         padding: 20px;
       }
       
       .recommendations-header {
         padding: 20px;
       }
       
       .recommendations-icon {
         width: 50px;
         height: 50px;
         margin-right: 15px;
       }
       
       .recommendations-icon i {
         font-size: 24px;
       }
       
       .recommendations-title h4 {
         font-size: 20px;
       }
     }
     
     
      
      
       
       
    
    .stats-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
    }
    
    .confidence-meter {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      font-size: 24px;
      font-weight: bold;
      color: white;
    }
    
    .safe-meter { background: conic-gradient(#28a745 0deg, #28a745 calc(var(--percentage) * 3.6deg), #e9ecef calc(var(--percentage) * 3.6deg)); }
    .risky-meter { background: conic-gradient(#dc3545 0deg, #dc3545 calc(var(--percentage) * 3.6deg), #e9ecef calc(var(--percentage) * 3.6deg)); }
    
    .chart-container {
      text-align: center;
      padding: 20px;
    }
    
    #featureChart {
      max-width: 100%;
      height: auto;
    }
    
    .feature-summary {
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    
    .feature-summary h5 {
      margin-bottom: 15px;
      font-weight: 600;
    }
    
    .feature-summary p {
      margin-bottom: 0;
      font-weight: bold;
    }
    
                   /* Risk Factors Styling - Minimal Design */
      .risk-factors-container {
        margin-bottom: 20px;
      }
      
      .risk-table {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        overflow: hidden;
      }
      
      .risk-table-header {
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
      }
      
      .risk-table-header th {
        border: none;
        padding: 12px 16px;
        font-weight: 500;
        font-size: 13px;
        color: #64748b;
        text-transform: none;
        letter-spacing: normal;
        vertical-align: middle;
      }
       
      .risk-table-row {
        border-bottom: 1px solid #f1f5f9;
        transition: background-color 0.2s ease;
      }
       
      .risk-table-row:hover {
        background-color: #f8fafc;
      }
       
      .risk-table-row td {
        padding: 12px 16px;
        vertical-align: middle;
        border: none;
      }
       
      .risk-number-badge {
        background: #64748b;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 4px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
        font-weight: 500;
      }
       
      .risk-description {
        color: #334155;
        font-size: 13px;
        line-height: 1.4;
        font-weight: 400;
      }
       
      .priority-badge-table {
        background: #dc2626;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
        text-transform: none;
        letter-spacing: normal;
      }
       
      .status-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
        text-transform: none;
        letter-spacing: normal;
      }
      
      .status-badge.active {
        background: #059669;
        color: white;
      }
     

       
               /* Enhanced Card Styling */
        .card.border-danger {
          border: none !important;
          border-radius: 15px;
          box-shadow: 0 10px 30px rgba(220, 53, 69, 0.15);
          overflow: hidden;
        }
        
        /* Enhanced Action Button Styling */
        .btn-analyze {
          background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
          border: none;
          color: white;
          padding: 12px 25px;
          font-size: 14px;
          font-weight: 600;
          border-radius: 25px;
          transition: all 0.3s ease;
          box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
          text-decoration: none;
          display: inline-block;
        }
        
        .btn-analyze:hover {
          background: linear-gradient(135deg, #5a6268 0%, #495057 100%);
          color: white;
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(108, 117, 125, 0.4);
          text-decoration: none;
        }
        
        .btn-download {
          background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
          border: none;
          color: white;
          padding: 12px 25px;
          font-size: 14px;
          font-weight: 600;
          border-radius: 25px;
          transition: all 0.3s ease;
          box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        .btn-download:hover {
          background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
          color: white;
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }
       
       .risk-header-icon {
         animation: pulse 2s infinite;
       }
       
       @keyframes pulse {
         0% { transform: scale(1); }
         50% { transform: scale(1.1); }
         100% { transform: scale(1); }
       }
       
                                                               /* Responsive adjustments */
          @media (max-width: 768px) {
            .risk-table {
              font-size: 12px;
            }
            
            .risk-table-header th,
            .risk-table-row td {
              padding: 8px 12px;
            }
            
            .risk-number-badge {
              width: 18px;
              height: 18px;
              font-size: 10px;
            }
            
            .priority-badge-table,
            .status-badge {
              padding: 3px 6px;
              font-size: 9px;
            }
            

                  }
        
        
   </style>
</head>

<body>

  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">
      
      <h1 class="logo mr-auto"><a href="{{ url_for('home') }}">PhishShield</a></h1>
      <a href="{{ url_for('home') }}" class="logo mr-auto">
        <img src="../static/assets/img/phishing copy.gif" alt="" class="img-fluid">
    </a>
      <nav class="nav-menu d-none d-lg-block">
        <ul>
          <li><a href="{{ url_for('home') }}">Home</a></li>
          <li><a href="{{ url_for('usecases') }}" target="_blank" rel="no-openner no-referrer">Usecases</a></li>
          <li class="active"><a href="#">Detailed Report</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main">
    <section class="breadcrumbs">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Detailed Analysis Report</h2>
          <ol>
            <li><a href="{{ url_for('home') }}">Home</a></li>
            <li>Detailed Report</li>
          </ol>
        </div>
      </div>
    </section>

         <section class="inner-page pt-4">
       <div class="container">
        

        
        

        <!-- Analysis Overview -->
        <div class="row mb-4">
          <div class="col-12">
            <div class="card">
                             <div class="card-header" style="background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%) !important; color: white;">
                 <h3><i class="fa fa-globe"></i> URL Analysis Overview</h3>
               </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-8">
                    <h4>Analyzed URL:</h4>
                    <p class="lead"><code>{{ analysis.url }}</code></p>
                    
                    <h4>Analysis Time:</h4>
                    <p><i class="fa fa-clock-o"></i> {{ analysis.timestamp }}</p>
                    
                    <h4>Overall Assessment:</h4>
                    {% if analysis.prediction == 1 %}
                    <div class="alert alert-success" role="alert">
                      <i class="fa fa-check-circle"></i> <strong>SAFE</strong> - This website appears to be legitimate
                    </div>
                    {% else %}
                    <div class="alert alert-danger" role="alert">
                      <i class="fa fa-exclamation-triangle"></i> <strong>PHISHING RISK DETECTED</strong> - This website may be malicious
                    </div>
                    {% endif %}
                  </div>
                  
                  <div class="col-md-4">
                    <div class="stats-card">
                      <h5>Confidence Score</h5>
                      {% if analysis.prediction == 1 %}
                      <div class="confidence-meter safe-meter" style="--percentage: {{ analysis.confidence_safe }}">
                        {{ "%.1f"|format(analysis.confidence_safe) }}%
                      </div>
                      <p class="mt-2">Legitimacy Confidence</p>
                      {% else %}
                      <div class="confidence-meter risky-meter" style="--percentage: {{ analysis.confidence_phishing }}">
                        {{ "%.1f"|format(analysis.confidence_phishing) }}%
                      </div>
                      <p class="mt-2">Phishing Risk</p>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Feature Analysis Summary -->
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="card text-center bg-success text-white">
              <div class="card-body">
                <h2>{{ analysis.safe_features }}</h2>
                <p class="card-text">Safe Features</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center bg-warning text-white">
              <div class="card-body">
                <h2>{{ analysis.total_features - analysis.safe_features - analysis.risky_features }}</h2>
                <p class="card-text">Neutral Features</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center bg-danger text-white">
              <div class="card-body">
                <h2>{{ analysis.risky_features }}</h2>
                <p class="card-text">Risk Factors</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Feature Analysis Chart -->
        <div class="row mb-4">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h4><i class="fa fa-pie-chart"></i> Feature Analysis Breakdown</h4>
              </div>
              <div class="card-body">
                <div class="chart-container" style="max-width: 300px; margin: 0 auto;">
                  <canvas id="featureChart" width="300" height="150"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Feature Summary -->
        <div class="row mb-4">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h4><i class="fa fa-info-circle"></i> Feature Summary</h4>
              </div>
              <div class="card-body">
                <div class="row text-center">
                  <div class="col-md-4">
                    <div class="feature-summary safe">
                      <h5><i class="fa fa-check-circle text-success"></i> Safe Features</h5>
                      <p class="h3 text-success">{{ analysis.safe_features }}</p>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="feature-summary neutral">
                      <h5><i class="fa fa-minus-circle text-warning"></i> Neutral Features</h5>
                      <p class="h3 text-warning">{{ analysis.total_features - analysis.safe_features - analysis.risky_features }}</p>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="feature-summary risky">
                      <h5><i class="fa fa-times-circle text-danger"></i> Risk Factors</h5>
                      <p class="h3 text-danger">{{ analysis.risky_features }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

                <!-- Risk Factors -->
        {% if analysis.risk_factors and analysis.risk_factors|length > 0 %}
        <div class="row mb-4">
          <div class="col-12">
            <div class="card border-danger">
                              <div class="card-header bg-danger text-white" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important; border: none; border-radius: 15px 15px 0 0;">
                  <div class="d-flex align-items-center justify-content-between">
                    <div>
                      <h4 class="mb-1"><i class="fa fa-exclamation-triangle"></i> Detected Risk Factors</h4>
                      <small class="d-block opacity-75">Found {{ analysis.risk_factors|length }} security concern(s)</small>
                    </div>
                    <div class="risk-header-icon">
                      <i class="fa fa-shield-alt fa-2x opacity-75"></i>
                    </div>
                  </div>
                </div>
               <div class="card-body">
                                  <div class="risk-factors-container">
                    <div class="table-responsive">
                      <table class="table table-hover risk-table">
                        <thead class="risk-table-header">
                          <tr>
                            <th scope="col" class="text-center" style="width: 80px;">#</th>
                            <th scope="col">Risk Description</th>
                            <th scope="col" class="text-center" style="width: 120px;">Priority</th>
                            <th scope="col" class="text-center" style="width: 100px;">Status</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for risk in analysis.risk_factors %}
                          <tr class="risk-table-row">
                            <td class="text-center">
                              <span class="risk-number-badge">{{ loop.index }}</span>
                            </td>
                            <td>
                              <div class="risk-description">
                                <i class="fa fa-exclamation-triangle text-danger me-2"></i>
                                {{ risk }}
                              </div>
                            </td>
                            <td class="text-center">
                              <span class="priority-badge-table">High</span>
                            </td>
                            <td class="text-center">
                              <span class="status-badge active">Active</span>
                            </td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                 

               </div>
             </div>
           </div>
         </div>
         {% else %}
         <!-- No Risk Factors Found -->
         <div class="row mb-4">
           <div class="col-12">
             <div class="card border-success">
               <div class="card-header bg-success text-white" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important; border: none; border-radius: 15px 15px 0 0;">
                 <div class="d-flex align-items-center justify-content-between">
                   <div>
                     <h4 class="mb-1"><i class="fa fa-check-circle"></i> Security Assessment</h4>
                     <small class="d-block opacity-75">No significant risk factors detected</small>
                   </div>
                   <div class="risk-header-icon">
                     <i class="fa fa-shield-alt fa-2x opacity-75"></i>
                   </div>
                 </div>
               </div>
               <div class="card-body text-center">
                 <div class="py-4">
                   <i class="fa fa-shield-check fa-3x text-success mb-3"></i>
                   <h5 class="text-success">Excellent Security Status</h5>
                   <p class="text-muted">This website has passed our security checks with no significant risk factors detected.</p>
                 </div>
               </div>
             </div>
           </div>
         </div>
         {% endif %}

        <!-- Recommendations -->
        <div class="row mb-4">
          <div class="col-12">
            <div class="card recommendations-card">
              <div class="card-header recommendations-header">
                <div class="d-flex align-items-center">
                  <div class="recommendations-icon">
                    <i class="fa fa-shield-alt"></i>
                  </div>
                  <div class="recommendations-title">
                    <h4 class="mb-0">Security Recommendations</h4>
                    <p class="mb-0">Follow these guidelines to stay protected</p>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="recommendations-grid">
                  {% for recommendation in analysis.recommendations %}
                  <div class="recommendation-item" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                    <div class="recommendation-icon">
                      <i class="fa fa-check-circle"></i>
                    </div>
                    <div class="recommendation-content">
                      <p>{{ recommendation }}</p>
                    </div>
                    <div class="recommendation-number">{{ loop.index }}</div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
        


                                                                       <!-- Action Buttons -->
           <div class="row mb-2">
             <div class="col-12 text-center">
                             <a href="{{ url_for('home') }}" class="btn btn-analyze me-3">
                  <i class="fa fa-arrow-left"></i> Analyze Another URL
                </a>
                                                         <button onclick="downloadDetailedReport()" class="btn btn-download">
                   <i class="fa fa-download"></i> Download Report
                 </button>
             </div>
           </div>

      </div>
    </section>
  </main>

  <footer id="footer">
    <div class="container d-md-flex py-4">
      <div class="text-center text-md-center">
        <p style="padding-top: 8px; font-weight: 600;">Second Year Project &copy; 2025.All Rights Reserved</p>
      </div>
    </div>
  </footer>

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <script src="../static/assets/vendor/jquery/jquery.min.js"></script>
  <script src="../static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../static/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="../static/assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="../static/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../static/assets/vendor/venobox/venobox.min.js"></script>
  <script src="../static/assets/vendor/aos/aos.js"></script>
  <script src="../static/assets/js/main.js"></script>

  <script>
    // Feature Analysis Chart
    const ctx = document.getElementById('featureChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Safe Features', 'Neutral Features', 'Risk Factors'],
        datasets: [{
          data: [
            {{ analysis.safe_features }},
            {{ analysis.total_features - analysis.safe_features - analysis.risky_features }},
            {{ analysis.risky_features }}
          ],
          backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
          borderWidth: 2,
          borderColor: '#fff'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom',
          },
          title: {
            display: true,
            text: 'Security Feature Distribution'
          }
        }
      }
    });


     
     
    
                                       // Risk factor management functions
       function expandRiskDetails() {
         const riskRows = document.querySelectorAll('.risk-table-row');
         riskRows.forEach(row => {
           row.style.backgroundColor = '#f1f5f9';
         });
         
         setTimeout(() => {
           riskRows.forEach(row => {
             row.style.backgroundColor = '';
           });
         }, 300);
         
         alert('Risk details expanded. Review each security concern carefully.');
       }
    
         function showRiskHelp() {
       const helpContent = `
         <div style="text-align: left; max-width: 500px;">
           <h5>Understanding Risk Factors</h5>
           <ul style="text-align: left;">
             <li><strong>URL Structure:</strong> Suspicious patterns in the web address</li>
             <li><strong>Domain Issues:</strong> Problems with domain registration or age</li>
             <li><strong>Security Features:</strong> Missing HTTPS, SSL certificates, or security headers</li>
             <li><strong>Redirects:</strong> Suspicious redirects to other domains</li>
             <li><strong>Content Analysis:</strong> Suspicious content or behavior patterns</li>
           </ul>
           <p><strong>Recommendation:</strong> Avoid websites with multiple risk factors.</p>
         </div>
       `;
       
       if (confirm('Would you like to see help information about risk factors?')) {
         alert(helpContent);
       }
     }
     
           // Enhanced download report function
      function downloadDetailedReport() {
        // Create a formatted HTML content for download
        const reportContent = generateReportHTML();
        
        // Create a blob with the HTML content
        const blob = new Blob([reportContent], { type: 'text/html' });
        
        // Create download link
        const downloadLink = document.createElement('a');
        downloadLink.href = URL.createObjectURL(blob);
        downloadLink.download = 'PhishShield_Security_Report.html';
        
        // Trigger download
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
        
        // Clean up
        URL.revokeObjectURL(downloadLink.href);
      }
      
      // Generate formatted HTML for download
      function generateReportHTML() {
        const reportData = {
          url: '{{ analysis.url }}',
          timestamp: '{{ analysis.timestamp }}',
          prediction: {{ analysis.prediction }},
          safeFeatures: {{ analysis.safe_features }},
          riskyFeatures: {{ analysis.risky_features }},
          totalFeatures: {{ analysis.total_features }},
          riskFactors: {{ analysis.risk_factors|tojson }},
          recommendations: {{ analysis.recommendations|tojson }}
        };
        
        return `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhishShield Security Analysis Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }
        .section { margin-bottom: 30px; }
        .section h2 { color: #2c3e50; border-left: 4px solid #3498db; padding-left: 15px; }
        .alert { padding: 15px; border-radius: 5px; margin: 15px 0; }
        .alert-success { background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .alert-danger { background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0; }
        .stat-card { text-align: center; padding: 20px; border-radius: 8px; color: white; }
        .stat-safe { background-color: #28a745; }
        .stat-neutral { background-color: #ffc107; }
        .stat-risky { background-color: #dc3545; }
        .risk-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .risk-table th, .risk-table td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        .risk-table th { background-color: #f8f9fa; font-weight: bold; }
        .recommendations { list-style: none; padding: 0; }
        .recommendations-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .recommendation-item { position: relative; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; padding: 25px; border: 1px solid #e9ecef; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); }
        .recommendation-icon { position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; }
        .recommendation-content { margin-right: 50px; }
        .recommendation-content p { margin: 0; font-size: 15px; line-height: 1.6; color: #495057; font-weight: 500; }
        .recommendation-number { position: absolute; top: 15px; left: 15px; width: 30px; height: 30px; background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: 700; }
        .footer { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
    </style>
</head>
<body>
    <div class="header">
        <h1>PhishShield Security Analysis Report</h1>
        <p><strong>Generated:</strong> ${reportData.timestamp}</p>
        <p><strong>URL Analyzed:</strong> ${reportData.url}</p>
    </div>
    
    <div class="section">
        <h2>Overall Assessment</h2>
        ${reportData.prediction == 1 ? 
            '<div class="alert alert-success"><strong>SAFE</strong> - This website appears to be legitimate</div>' : 
            '<div class="alert alert-danger"><strong>PHISHING RISK DETECTED</strong> - This website may be malicious</div>'
        }
    </div>
    
    <div class="section">
        <h2>Feature Analysis Summary</h2>
        <div class="stats-grid">
            <div class="stat-card stat-safe">
                <h3>${reportData.safeFeatures}</h3>
                <p>Safe Features</p>
            </div>
            <div class="stat-card stat-neutral">
                <h3>${reportData.totalFeatures - reportData.safeFeatures - reportData.riskyFeatures}</h3>
                <p>Neutral Features</p>
            </div>
            <div class="stat-card stat-risky">
                <h3>${reportData.riskyFeatures}</h3>
                <p>Risk Factors</p>
            </div>
        </div>
    </div>
    
         ${reportData.riskFactors && reportData.riskFactors.length > 0 ? `
     <div class="section">
         <h2>Detected Risk Factors</h2>
         <table class="risk-table">
             <thead>
                 <tr>
                     <th>#</th>
                     <th>Risk Description</th>
                     <th>Priority</th>
                 </tr>
             </thead>
             <tbody>
                 ${reportData.riskFactors.map((risk, index) => `
                     <tr>
                         <td>${index + 1}</td>
                         <td>${risk}</td>
                         <td>High</td>
                     </tr>
                 `).join('')}
             </tbody>
         </table>
     </div>
     ` : `
     <div class="section">
         <h2>Security Assessment</h2>
         <div style="background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 20px; border-radius: 8px; text-align: center;">
             <h3 style="color: #155724; margin-bottom: 10px;">✅ Excellent Security Status</h3>
             <p style="margin: 0; font-size: 16px;">This website has passed our security checks with no significant risk factors detected.</p>
         </div>
     </div>
     `}
    
    <div class="section">
        <h2>Security Recommendations</h2>
        <div class="recommendations-grid">
            ${reportData.recommendations.map((rec, index) => `
                <div class="recommendation-item">
                    <div class="recommendation-icon">✓</div>
                    <div class="recommendation-content">
                        <p>${rec}</p>
                    </div>
                    <div class="recommendation-number">${index + 1}</div>
                </div>
            `).join('')}
        </div>
    </div>
    
    <div class="footer">
        <p>Report generated by PhishShield - Phishing Website Detection System</p>
        <p>Second Year Project © 2025. All Rights Reserved</p>
    </div>
</body>
</html>`;
      }
   </script>

</body>
</html>